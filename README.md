# fy4_image_dp

FY-4成像仪数据处理系统

    今年5月初，CMACast开始广播下发FY4号卫星扫描辐射计观测数据。其中成像仪数据包含1个500米分辨率可见光通道、
3个1公里分辨率可见光通道、7个2公里分辨率可见光、近、中红外通道、14个4公里可见光、近、中、远红外通道的数据。
大约15分钟即可完成一次观测循环，使我们得到的卫星数据空间、时间分辨率、光谱通道数得到革命性提高。一个小时的
数据量可达4GB以上。如此巨大的高质量数据真正把我们气象工作者带进了国际气象行业的“富人”俱乐部。那么这些数据
我们怎么用呢？怎么才能成为一个真正的富人而不是“土豪”呢？无疑要求我们必须定量使用、科学使用。可是FY4号卫星
数据结构复杂、体量巨大，很多朋友从底层做起有很多障碍，如果投入过多精力势必转移了对气象本专业的关注，费神、费力。
通过近一段时间的努力，开发完成了FY4卫星数据应用类库，为庞大、繁杂的数据设计了一个调用接口，目前适应Windows
系统.NET托管代码环境，使用.NET框架的朋友们可以直接引用、调用这个类库，从而大大简化、甚至不用再去关心具体的
数据组织形式，可以更多、更快的集中精力在气象应用问题上。下面介绍这个类库及调用类库的例程。

WpfTestFy4Class程序的摘要说明。
    非常自豪的告诉大家，从8月的这一版起，原本只是为了测试应用类库的这个测试程序，已经成为一款功能强大的
FY-4成像仪数据处理软件。因此，对于FY-4号卫星成像仪数据的应用，我不仅是“授人以渔，而且也同时再进一步授人以鱼了”。除去设计器自动生成的代码，这个程序已多达数千行，它不仅可以读取FY-4卫星广播下发的，包括4、2、1公里、5百米分辨率1到14个光谱通道的成像仪HDF5格式数据文件，而且加入了众多处理功能，使之成为了一款强大的数据/图像处理软件，同时这些强大的功能也展示了FY-4号卫星成像仪数据类库的强大功能。

    所展示的FY-4号数据类库的功能包括：读取数据、操纵这些数据的方法。其类方法主要包括：

1、获取任意指定经纬区域的各光谱通道的数据和图像。
2、获取任意指定经纬点某光谱通道的灰度/亮温/反照率的数值。
3、获取任意指定经纬点所有光谱通道的灰度/亮温/反照率的数值。
4、获取数据文件包含的所有数据集及其属性，提取某光谱通道全区域扫描灰度图像。

    这个FY-4成像仪数据处理程序实现了：
1、调入指定路径下HDF5格式的FY-4卫星成像仪观测数据并提取任意经纬区域数据及其图像的功能；
2、批量调入选定路径下FY-4成像仪数据，按照文件数据固有分辨率截取选定区域数据的功能。
3、实时监控给定路径下新生成的FY-4成像仪数据，实时处理形成选定区域的数据文件的功能。(附带了程序初始化文本文件，连业务化都一并解决了呀！)
4、读取显示了相应FY-4卫星广播数据文件的各种数据集参数和属性。
5、灵活选定截取区域。右下角的经纬区域文本框将随你意愿选择经纬矩形区域，截取这个区域的数据并显示其图像。
6、这个程序还实现了基本的图像、数据操作功能：

	6.1、放大、缩小、平移选定通道的图像，实现仔细查看功能。
	6.2、显示图像上任意一点所对应的卫星成像仪观测的灰度、亮温/反射率的数值。
	6.3、给显示图像加上、取消经纬网格。
	6.4、保存你所截取区域任意通道或所有通道的数据。保存选定图像框的图像。

      另外，为了展示如何操作保存后的数据。目前我还提供了一个程序，作为后续处理的程序，或许过一个时间，这个程序也会
成为功能强大的另一款强大的处理软件。

      这个程序包括了以下几个重要的文件：
1、Fy4HDF5Dat.dll：这是主文件，他是.NET的托管动态链接库，因此在你的工程中直接添加引用就行了。对卫星数据操作的主要功能
都在这个库中实现，同时，这个库也屏蔽了HDF5的很多复杂的概念、和操作，使得FY4数据调取变得直接、简单。新版的这个纠正了以前
老板中的个别错误，此前已经下载使用的朋友们务必要改用这个新的。
2、HDF5DotNet.dll;hdf5_hldll.dll;hdf5dll.dll;szip.dll;zlib.dll：这5个动态链接库,是美国HDF网站上公开公布的HDF5数据函数库，
它们提供了操作HDF5格式数据的众多普适接口函数。
3、WpfTestFy4Class.xaml、WpfTestFy4Class.xaml.cs、PopupImgView.xaml、PopupImgView.xaml.cs这四个文件是源代码文件，展示了
如何利用Fy4HDF5Dat类库操纵卫星数据的方法。

    这里的演示程序已经支持如此多的功能，更重要的是你可以感觉到使用FY4卫星数据类库操纵数据的方法，就如同使用Windows内部函数
一样轻松！通过这个程序你可以学会如何使用FY4的HDF5数据类动态链接库，可以借用这个工具，借助于他的力量使您已经可以对FY4号卫星
数据应用，轻松进入定量阶段了。

    设想一下可能的应用方向：
1、自动、每个时刻提取某个经纬点14个光谱通道的亮温值，与相对应的气象站测值形成相关对照，进而得出结果甚至由此指导类似无站地域的各种要素。
2、自动、每时刻提取某个点或区域的14个光谱通道的亮温或反照率，形成阴晴相关对照，得出结果甚至指导无人区或国外服务点的阴晴预报。
3、持续不断的提取相应小区域14个通道高分辨率的亮温/反照率，积累成年月值，研究你关心小区域的卫星气候性质。
4、。。。。。。。。等等。

    FY4号卫星数据是2018年5月初开始广播下发的，数据分辨率、光谱通道、定量应用能力已经进入国际前列，这个应用工具可使你迅速专注于这个最新
的先进卫星资料定量应用领域，开创你对气象技术的理解的新境界。
    此外，由于Fy4号卫星分辨率高，文件超大，程序运行较费时，同时，这个成像仪数据处理软件同时操纵了多达14个通道的数据，同时显示15张图，
所以，程序必须运行在64位系统上，内存最好8G(我4G的机子使用也还可以)以上，屏幕最好支持1920X1080或以上。

    上述文件的使用是将上述六个动态链接库；WpfTestFy4Class.exe；放在同一个目录下就可以启动exe文件应用了。另外我把测试程序的“解决方案”
整体打了一个压缩包，方便大家直接解压到工程文件目录，直接在vs中观看和剪切。全部程序均在Microsoft Visual Studio 2012/2017中编制、调试、编译通过。

    最后，由于软件功能也全了，体量也大了，特别声明：未经本人许可，谢绝在我会会员以外传播，否则，本人保留一切追责的权力。
    欢迎质询、咨询、讨论、拍砖！电话：0991-2695070。QQ：591589408。哦，还有姓名：新疆气象学会理事会——张杰。
